{% extends 'base.html' %}
{% load humanize %}

{% block title %}ì¤‘ê³ ê±°ë˜ ê¸€ ëª©ë¡{% endblock %}

{% block content %}
<h2 class="mb-4">ğŸ“‹ ì¤‘ê³ ê±°ë˜ ê¸€ ëª©ë¡</h2>

<!-- ğŸ” ê²€ìƒ‰/í•„í„° í¼ -->
<form method="get" class="row g-2 align-items-end mb-4">
  <div class="col-md-3">
    <label class="form-label">ì¹´í…Œê³ ë¦¬</label>
    <select name="category" class="form-select">
      <option value="">ì „ì²´</option>
      <option value="ë„ì„œ" {% if category == 'ë„ì„œ' %}selected{% endif %}>ë„ì„œ</option>
      <option value="ì „ìê¸°ê¸°" {% if category == 'ì „ìê¸°ê¸°' %}selected{% endif %}>ì „ìê¸°ê¸°</option>
      <option value="ìƒí™œìš©í’ˆ" {% if category == 'ìƒí™œìš©í’ˆ' %}selected{% endif %}>ìƒí™œìš©í’ˆ</option>
      <option value="ê¸°íƒ€" {% if category == 'ê¸°íƒ€' %}selected{% endif %}>ê¸°íƒ€</option>
    </select>
  </div>

  <div class="col-md-3">
    <label class="form-label">ì •ë ¬</label>
    <select name="sort" class="form-select">
      <option value="latest" {% if sort == 'latest' %}selected{% endif %}>ìµœì‹ ìˆœ</option>
      <option value="price_asc" {% if sort == 'price_asc' %}selected{% endif %}>ê°€ê²© ë‚®ì€ìˆœ</option>
      <option value="price_desc" {% if sort == 'price_desc' %}selected{% endif %}>ê°€ê²© ë†’ì€ìˆœ</option>
    </select>
  </div>

  <div class="col-md-4">
    <label class="form-label">ê²€ìƒ‰ì–´</label>
    <input type="text" name="search" value="{{ search }}" class="form-control" placeholder="ì œëª© ë˜ëŠ” ë‚´ìš©">
  </div>

  <div class="col-md-2">
    <button type="submit" class="btn btn-primary w-100">ğŸ” ê²€ìƒ‰</button>
  </div>
</form>

<!-- ğŸ“ ê¸€ì“°ê¸° & ë§ˆì´í˜ì´ì§€ ë²„íŠ¼ -->
<div class="d-flex justify-content-between mb-3">
  <a href="{% url 'post_create' %}" class="btn btn-success">â• ê¸€ì“°ê¸°</a>
  <a href="{% url 'my_page' %}" class="btn btn-outline-primary">ğŸ‘¤ ë§ˆì´í˜ì´ì§€</a>
</div>

<!-- ğŸ“„ ê¸€ ëª©ë¡ -->
<div class="list-group">
  {% for post in posts %}
    <a href="{% url 'post_detail' post.pk %}" class="list-group-item list-group-item-action">
      <div class="d-flex justify-content-between">
        <strong>{{ post.title }}</strong>
        <small class="text-muted">{{ post.created_at|date:"Y-m-d H:i" }}</small>
      </div>
      <div class="text-muted small mt-1">
        ğŸ‘¤ {{ post.author }} |
        ğŸ’° {{ post.price|intcomma }}ì› |
        ğŸ“‚ {{ post.category }} |
        ğŸ”„ {{ post.status }}
      </div>
    </a>
  {% empty %}
    <p class="text-muted">ë“±ë¡ëœ ê¸€ì´ ì—†ìŠµë‹ˆë‹¤.</p>
  {% endfor %}
</div>

<!-- ë¡œê·¸ì•„ì›ƒ ë²„íŠ¼ -->
<hr>
<div class="text-center mt-4">
  <a href="{% url 'logout' %}" class="btn btn-outline-danger">ğŸ”“ ë¡œê·¸ì•„ì›ƒ</a>
</div>
{% endblock %}
